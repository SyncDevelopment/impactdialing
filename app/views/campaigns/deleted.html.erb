<h1>Archived campaigns</h1>
<% if @campaigns.empty? %>
  <p>No campaigns archived.</p>
<% else %>
  <table>
    <tr>
      <th>Name</th>
      <th>Reports</th>
      <th>Date archived</th>
      <th width="55" class="ac"></th>
    </tr>
    <% @campaigns.each_with_index do |c, index| %>
      <tr>
        <td><strong><%= link_to c.name, edit_client_campaign_path(c) %></strong></td>
        <td>
          <% options = [
            ['Usage', usage_client_reports_path(:campaign_id => c.id)],
            ['Answers', answer_client_reports_path(:campaign_id => c.id)],
            ['Stats', performance_client_campaign_reports_path(c.id)],
            ['Dials', dials_client_reports_path(:campaign_id => c.id)],
            ['Download', download_report_client_campaign_reports_path(c, archived: '1')],
            ["Ready [#{@download_report_count[c.id.to_s] || 0}]", downloaded_reports_client_campaign_reports_path(c)]
          ] %>
          <%= select_tag '', options_for_select(options), include_blank: true, class: 'report_select_menu' %>
        </td>
        <td><%= c.updated_at.strftime("%m/%d/%Y") %></td>
        <td><%= link_to 'Restore', client_campaign_restore_path(c), :method => :put %></td>
      </tr>
    <% end %>
  </table>
  <p><%= page_entries_info @campaigns, model: Campaign %> <%= will_paginate @campaigns %></p>
<% end %>

<script type="text/javascript">
  $('.report_select_menu').change(function(eventObj){
    eventObj.preventDefault();
    window.location = $(eventObj.target).val();
    $('.report_select_menu').val('');
  });
</script>