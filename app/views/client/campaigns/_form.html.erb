<%= content_for :javascripts do %>
  <%= javascript_include_tag 'campaign/campaign', 'campaign/list_upload_form',
    'campaign/voter_lists', 'form_helpers/grouped_selects', 'jquery.form' %>

  <script type="text/javascript">
    $(function(){
      campaign = new Campaign();
      $('#campaign-tabs').tabs();
      $('#campaign-tabs').show();
    });
  </script>
<% end %>

<div class="main-content">
  <%= render "shared/error_messages", :target => @campaign %>

  <div id="campaign-tabs" style="display: none;">
    <ul>
      <li><a href="#settings">Settings</a></li>
      <li><a href="#messages">Messages</a></li>
      <li><a href="#upload">Upload</a></li>
      <li><a href="#info">Info</a></li>
    <% if @campaign.lists.disabled.count > 0 %>
      <li><a href="#disabled-lists">Disabled lists</a></li>
    <% end %>
    </ul>

    <div id="settings" style="display: none;">
      <%= render 'settings' %>
    </div>

    <div id="messages" style="display: none;">
      <%= render 'messages' %>
    </div>

    <div id="upload" style="display: none;">
      <% unless @campaign.new_record? %>
        <%= render 'upload_form' %>

        <div class="clearfix">
          <%= render 'upload_history' if @campaign.voter_lists.count > 0 %>
        </div>
      <% else %>
        <p>Lists can be uploaded once the campaign has been saved.</p>
      <% end %>
    </div>

    <div id="info" style="display: none;">
      <% if dials_summary.present? %>
        <%= dials_summary %>
      <% else %>
        <p>This will display once the campaign is saved.</p>
      <% end %>
    </div>

  <% if @campaign.lists.disabled.count > 0 %>
    <div id="disabled-lists" style="display: none;">
      <%= render 'disabled_lists' %>
    </div>
  <% end %>
  </div>
</div>
