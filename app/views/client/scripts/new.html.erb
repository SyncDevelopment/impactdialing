<% content_for :javascripts do %>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
    <%= javascript_include_tag 'scripts/add_remove.js' %>
<% end %>
<h1><%= @script.new_record? ? "New script" : "Edit script" %></h1>
<%= error_messages_for :script %>

<%= nested_form_for [:client, @script] do |f| %>
    <%= f.hidden_field :robo %>
    <p>
      <label>Script name</label>
      <%= f.text_field :name, {:class => "field"} %>

      <%= f.fields_for :questions do |q| %>
        <fieldset>
          <legend>Question</legend>
          <%= q.text_field :text %>
          <fieldset>
            <legend>Responses</legend>
            <%= q.fields_for :possible_responses do |r| %>
                <table>
                  <tr>
                    <td>
                      <%= r.text_field :value %>
                    </td>
                    <td>
                      <%= r.text_field :keypad %>
                    </td>
                    <td>
                      <%= r.link_to_remove "Remove response"%>                      
                    </td>
                  </tr>
                </table>
            <% end %>
            <%= q.link_to_add "Add response", :possible_responses %>
          </fieldset>
          <%= q.link_to_remove "Remove this question" %>
        </fieldset>

    <% end %>
    <%= f.link_to_add "Add a question", :questions %>
    </p>
    <%= f.submit 'Save' %>
<% end %>